"use strict";(self.webpackChunkmaze=self.webpackChunkmaze||[]).push([[854],{7854:(k,v,s)=>{s.r(v),s.d(v,{YoutubeModule:()=>Y});var g=s(177),b=s(294),M=s(467),O=s(9350),x=s(7707),e=s(7705),p=s(1626),E=s(7468),C=s(8810),h=s(9437),a=s(6354),I=s(5558);let l=(()=>{class n{constructor(t){this.http=t,this.apiKey="YOUR_API_KEY"}getSubscriptions(t){const o=`https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&mine=true&maxResults=50&key=${this.apiKey}`,i=new p.Lr({Authorization:`Bearer ${t}`});return this.http.get(o,{headers:i}).pipe((0,h.W)(this.handleError))}getMostRecentVideo(t,o){const i=`https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${t}&order=date&maxResults=1&key=${this.apiKey}`,d=new p.Lr({Authorization:`Bearer ${o}`});return this.http.get(i,{headers:d}).pipe((0,a.T)(r=>r.items[0]),(0,h.W)(this.handleError))}getRecentVideosFromSubscriptions(t){return this.getSubscriptions(t).pipe((0,I.n)(o=>{const d=o.items.map(r=>r.snippet.resourceId.channelId).map(r=>this.getMostRecentVideo(r,t));return(0,E.p)(d).pipe((0,a.T)(r=>r.flat()),(0,a.T)(r=>r.sort((D,V)=>new Date(V.snippet.publishedAt).getTime()-new Date(D.snippet.publishedAt).getTime())),(0,a.T)(r=>r.slice(0,20)),(0,h.W)(this.handleError))}))}handleError(t){console.error("An error occurred:",t);let o="Something went wrong; please try again later.";return o=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server-side error: ${t.error.error?.message||t.message} (Status: ${t.status})`,(0,C.$)(()=>new Error(o))}static{this.\u0275fac=function(o){return new(o||n)(e.KVO(p.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function u(n,c){1&n&&(e.j41(0,"div",5)(1,"p"),e.EFF(2,"Login to see your videos"),e.k0s(),e.nrm(3,"div",6),e.k0s())}function f(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",7)(1,"p"),e.EFF(2),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.getYouTubeSubscriptions())}),e.EFF(4,"Retry"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.JRh(t.error)}}function T(n,c){if(1&n&&(e.j41(0,"li",11)(1,"a",12),e.nrm(2,"img",13),e.j41(3,"div",14)(4,"h3",15),e.EFF(5),e.k0s(),e.j41(6,"p",16),e.EFF(7),e.nI1(8,"date"),e.k0s()()()()),2&n){const t=c.$implicit;e.R7$(1),e.Y8G("href","https://www.youtube.com/watch?v="+t.id.videoId,e.B4B),e.R7$(1),e.FS9("alt",t.snippet.title),e.Y8G("src","https://img.youtube.com/vi/"+t.id.videoId+"/hqdefault.jpg",e.B4B),e.R7$(3),e.JRh(t.snippet.title),e.R7$(2),e.SpI("Published on: ",e.i5U(8,5,t.snippet.publishedAt,"shortDate"),"")}}function R(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",9)(1,"h2"),e.EFF(2,"Recent Videos from Your Subscriptions"),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.getYouTubeSubscriptions())}),e.EFF(4,"Refresh"),e.k0s(),e.j41(5,"ul"),e.DNE(6,T,9,8,"li",10),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.recentVideos)}}function m(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",17)(1,"p"),e.EFF(2,"No recent videos found."),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.getYouTubeSubscriptions())}),e.EFF(4,"Refresh"),e.k0s()()}}const P=[{path:"",component:(()=>{class n{constructor(t,o){this.youtubeService=t,this.cdr=o,this.recentVideos=[],this.loading=!0,this.error=null,this.CLIENT_ID="500954188018-pl7ri0a7qbq1gd4gd71gaafkp4udf1n1.apps.googleusercontent.com",this.accessToken=null}ngOnInit(){}ngAfterViewInit(){this.initializeGoogleSignIn()}initializeGoogleSignIn(){google.accounts.id.initialize({client_id:this.CLIENT_ID,callback:this.handleCredentialResponse.bind(this)}),console.log("Google Sign-In initialized"),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"}),this.tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.CLIENT_ID,scope:"https://www.googleapis.com/auth/youtube.readonly",callback:this.handleTokenResponse.bind(this)})}handleCredentialResponse(t){console.log("Google ID Token:",t.credential),this.tokenClient.requestAccessToken()}handleTokenResponse(t){console.log("Access Token:",t.access_token),this.accessToken=t.access_token,this.loadRecentVideos()}getYouTubeSubscriptions(){this.accessToken?fetch("https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&mine=true",{headers:{Authorization:`Bearer ${this.accessToken}`}}).then(o=>o.json()).then(o=>{console.log("YouTube Subscriptions:",o)}).catch(o=>console.error("Error fetching YouTube subscriptions:",o)):console.error("No access token found.")}loadRecentVideos(){var t=this;return(0,M.A)(function*(){try{t.loading=!0,t.recentVideos=yield function _(n,c){const t="object"==typeof c;return new Promise((o,i)=>{const d=new x.Ms({next:r=>{o(r),d.unsubscribe()},error:i,complete:()=>{t?o(c.defaultValue):i(new O.G)}});n.subscribe(d)})}(t.youtubeService.getRecentVideosFromSubscriptions(t.accessToken)),console.log("Recent Videos:",t.recentVideos)}catch(o){t.error="Error fetching recent videos",console.error("Error fetching recent videos:",o)}finally{t.loading=!1,t.cdr.detectChanges()}})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(l),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-youtube"]],decls:5,vars:4,consts:[[1,"container"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","videos-list",4,"ngIf"],["class","no-videos-message",4,"ngIf"],[1,"loading-message"],["id","google-signin-button",1,"signin-button"],[1,"error-message"],[3,"click"],[1,"videos-list"],["class","video-item",4,"ngFor","ngForOf"],[1,"video-item"],["target","_blank",3,"href"],[1,"thumbnail",3,"src","alt"],[1,"video-details"],[1,"video-title"],[1,"video-date"],[1,"no-videos-message"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.DNE(1,u,4,0,"div",1),e.DNE(2,f,5,1,"div",2),e.DNE(3,R,7,1,"div",3),e.DNE(4,m,5,0,"div",4),e.k0s()),2&o&&(e.R7$(1),e.Y8G("ngIf",i.loading),e.R7$(1),e.Y8G("ngIf",!i.loading&&i.error),e.R7$(1),e.Y8G("ngIf",!i.loading&&!i.error&&i.recentVideos.length>0),e.R7$(1),e.Y8G("ngIf",!i.loading&&!i.error&&0===i.recentVideos.length))},dependencies:[g.Sq,g.bT,g.vh],styles:[".container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:20px}.loading-message[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#555}.signin-button[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.error-message[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#e74c3c}.videos-list[_ngcontent-%COMP%]{padding:10px}.videos-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.video-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:20px;border-bottom:1px solid #ddd;padding-bottom:10px}.thumbnail[_ngcontent-%COMP%]{width:120px;height:90px;margin-right:15px;border-radius:8px;box-shadow:0 4px 8px #0000001a}.video-details[_ngcontent-%COMP%]{flex:1}.video-title[_ngcontent-%COMP%]{font-size:18px;color:#333;margin:0;text-decoration:none;display:block}.video-title[_ngcontent-%COMP%]:hover{text-decoration:underline}.video-date[_ngcontent-%COMP%]{color:#777}.no-videos-message[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#555}"]})}}return n})()}];let F=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[b.iI.forChild(P),b.iI]})}}return n})(),Y=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({providers:[l],imports:[g.MD,p.q1,F]})}}return n})()},7468:(k,v,s)=>{s.d(v,{p:()=>p});var g=s(1985),b=s(3073),M=s(8750),O=s(3794),x=s(4360),_=s(6450),e=s(8496);function p(...E){const C=(0,O.ms)(E),{args:h,keys:a}=(0,b.D)(E),I=new g.c(l=>{const{length:u}=h;if(!u)return void l.complete();const f=new Array(u);let T=u,R=u;for(let m=0;m<u;m++){let y=!1;(0,M.Tg)(h[m]).subscribe((0,x._)(l,P=>{y||(y=!0,R--),f[m]=P},()=>T--,void 0,()=>{(!T||!y)&&(R||l.next(a?(0,e.e)(a,f):f),l.complete())}))}});return C?I.pipe((0,_.I)(C)):I}}}]);